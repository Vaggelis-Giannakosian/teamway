"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[862],{2279:(t,e,n)=>{n.d(e,{Z:()=>o});var s=n(3645),i=n.n(s)()((function(t){return t[1]}));i.push([t.id,"#questionnaire .progress[data-v-01ef14bd]{height:3px;transition:width .4s}#questionnaire ul[data-v-01ef14bd]{list-style:none;padding-left:0}#questionnaire ul li input[data-v-01ef14bd]{margin-top:6px}#questionnaire ul li label[data-v-01ef14bd]{cursor:pointer}",""]);const o=i},8862:(t,e,n)=>{n.r(e),n.d(e,{default:()=>a});const s={name:"Questionnaire",props:["questions","initialAnswers","completeUrl","redirectUrl"],data:function(){return{currentQuestion:null,answers:this.initialAnswers,loading:!1}},created:function(){var t=this;this.questions.forEach((function(e){return e.answers=t.shuffleArray(e.answers)})),this.currentQuestion=this.questions[0]},computed:{completionRate:function(){return(this.answers.length/this.questions.length*100).toFixed(0)+"%"},currentQuestionIndex:function(){var t=this;return this.questions.findIndex((function(e){return e.id===t.currentQuestion.id}))}},methods:{shuffleArray:function(t){for(var e,n=t.length;0!==n;){e=Math.floor(Math.random()*n),n--;var s=[t[e],t[n]];t[n]=s[0],t[e]=s[1]}return t},goToNextQuestion:function(){this.updateAnswer(),this.chooseNextQuestion()},goToPreviousQuestion:function(){this.updateAnswer(),this.choosePreviousQuestion()},chooseNextQuestion:function(){this.changeQuestion(this.currentQuestionIndex+1)},choosePreviousQuestion:function(){this.changeQuestion(this.currentQuestionIndex-1)},changeQuestion:function(t){t<0||t>this.questions.length-1||(this.currentQuestion=this.questions[t])},updateAnswer:function(){var t=this,e=this.$refs.answersList.querySelector("input:checked"),n=this.answers.findIndex((function(e){return e.question_id==t.currentQuestion.id}));-1!==n&&this.answers.splice(n,1),e&&this.answers.push(this.currentQuestion.answers.find((function(t){return t.id==e.value})))},updateTestAnswers:function(){var t=this;this.loading||(this.loading=!0,axios.put(this.completeUrl,{answers:this.answers.map((function(t){return t.id}))}).then((function(e){e.data;window.location=t.redirectUrl})).catch((function(e){t.loading=!1})))}}};var i=n(3379),o=n.n(i),r=n(2279),u={insert:"head",singleton:!1};o()(r.Z,u);r.Z.locals;const a=(0,n(1900).Z)(s,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"questionnaire"}},[n("div",{staticClass:"bg-info progress",style:{width:t.completionRate}}),t._v(" "),n("div",{staticClass:"card shadow-sm p-4"},[n("div",{staticClass:"card-body p-0"},[n("div",{staticClass:"d-flex justify-content-between"},[n("h3",{staticClass:"text-info",domProps:{textContent:t._s("Question "+(t.currentQuestionIndex+1)+" of "+t.questions.length)}}),t._v(" "),n("h3",{staticClass:"text-info",domProps:{textContent:t._s(t.completionRate)}})]),t._v(" "),n("h4",{staticClass:"py-3",domProps:{textContent:t._s(t.currentQuestion.title)}}),t._v(" "),n("ul",{ref:"answersList"},t._l(t.currentQuestion.answers,(function(e){return n("li",{key:e.id,staticClass:"position-relative"},[n("input",{staticClass:"position-absolute",attrs:{type:"radio",name:"question_"+t.currentQuestion.id,"data-question":t.currentQuestion.id,id:"answer_"+e.id},domProps:{value:e.id,checked:-1!==t.answers.findIndex((function(t){return t.id===e.id}))}}),t._v(" "),n("label",{staticClass:"ml-3",attrs:{for:"answer_"+e.id}},[t._v(t._s(e.label))])])})),0),t._v(" "),n("div",{staticClass:"pt-4 d-flex align-items-center justify-content-between"},[n("div",[0!==t.currentQuestionIndex?n("a",{staticClass:"btn btn-outline-info",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.goToPreviousQuestion.apply(null,arguments)}}},[t._v("Previous")]):t._e(),t._v(" "),n("a",{staticClass:"btn btn-info",attrs:{href:"#"},domProps:{textContent:t._s("Next")},on:{click:function(e){return e.preventDefault(),t.goToNextQuestion.apply(null,arguments)}}})]),t._v(" "),t.answers.length===t.questions.length?n("div",{staticClass:"position-relative"},[t.loading?n("vue-spinner"):t._e(),t._v(" "),n("a",{staticClass:"btn btn-white",attrs:{disabled:t.loading,href:t.redirectUrl},on:{click:function(e){return e.preventDefault(),t.updateTestAnswers.apply(null,arguments)}}},[t._v("Finish")])],1):t._e()])])])])}),[],!1,null,"01ef14bd",null).exports}}]);